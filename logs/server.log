2024-05-28 10:16:39 [INFO] (src/server/main.c:10): server starting...
2024-05-28 10:16:39 [INFO] (src/server/main.c:25): Configuration loaded: IP=192.168.5.164, Port=8080, MinThreads=2, MaxThreads=10, QueueSize=50
2024-05-28 10:16:39 [INFO] (src/server/server.c:17): Initializing server, IP=192.168.5.164, Port=8080, MinThreads=2, MaxThreads=10, QueueSize=50
2024-05-28 10:16:39 [INFO] (src/server/network_utils.c:13): Attempting to create server socket at 192.168.5.164:8080
2024-05-28 10:16:39 [DEBUG] (src/server/network_utils.c:22): Socket created, FD=4
2024-05-28 10:16:39 [DEBUG] (src/server/network_utils.c:30): Socket options set, SO_REUSEADDR
2024-05-28 10:16:39 [DEBUG] (src/server/network_utils.c:44): Socket bound to 192.168.5.164:8080
2024-05-28 10:16:39 [INFO] (src/server/network_utils.c:52): Server socket listening on 192.168.5.164:8080
2024-05-28 10:16:39 [INFO] (src/server/server.c:25): Server socket created, FD=4
2024-05-28 10:16:39 [INFO] (src/server/thread_pool.c:15): Creating thread pool with MinThreads=2, MaxThreads=10, QueueSize=50
2024-05-28 10:16:39 [DEBUG] (src/server/thread_pool.c:66): Worker thread 0 started.
2024-05-28 10:16:39 [DEBUG] (src/server/thread_pool.c:66): Worker thread 1 started.
2024-05-28 10:16:39 [INFO] (src/server/thread_pool.c:69): Thread pool created successfully.
2024-05-28 10:16:39 [INFO] (src/server/server.c:34): Thread pool created, MinThreads=2, MaxThreads=10, QueueSize=50
2024-05-28 10:16:39 [INFO] (src/server/server.c:45): Monitor thread created.
2024-05-28 10:16:39 [DEBUG] (src/server/epoll_manager.c:15): Attempting to create a new epoll instance.
2024-05-28 10:16:39 [INFO] (src/server/epoll_manager.c:21): Created new epoll instance with FD: 5
2024-05-28 10:16:39 [INFO] (src/server/server.c:55): Epoll instance created, FD=5
2024-05-28 10:16:39 [INFO] (src/server/server.c:87): Monitor thread is monitoring thread pool
2024-05-28 10:16:39 [DEBUG] (src/server/epoll_manager.c:28): Adding FD 4 to epoll instance with FD 5.
2024-05-28 10:16:39 [INFO] (src/server/epoll_manager.c:33): FD 4 added to epoll instance.
2024-05-28 10:16:39 [INFO] (src/server/server.c:61): Server socket added to epoll, FD=4
2024-05-28 10:16:39 [INFO] (src/server/server.c:63): Server is now listening on 192.168.5.164:8080
2024-05-28 10:16:39 [INFO] (src/server/epoll_manager.c:64): Starting epoll event loop.
2024-05-28 10:16:41 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:16:41 [DEBUG] (src/server/epoll_manager.c:28): Adding FD 6 to epoll instance with FD 5.
2024-05-28 10:16:41 [INFO] (src/server/epoll_manager.c:33): FD 6 added to epoll instance.
2024-05-28 10:16:41 [INFO] (src/server/epoll_manager.c:89): Accepted new connection: FD 6
2024-05-28 10:16:46 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:16:46 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:16:46 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:16:46 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "login", "args": { "username": "xiaheng", "password": "9651643461c6ff49fe1482e3de6563f1366f2b910e742d4af0b9628239a7f227" } }
2024-05-28 10:16:47 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:47 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:47 [INFO] (src/server/database.c:98): Retrieved user 'xiaheng' from database
2024-05-28 10:16:47 [INFO] (src/server/auth_handler.c:94): User logged in successfully: xiaheng
2024-05-28 10:16:47 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /
2024-05-28 10:16:47 [DEBUG] (src/server/jwt_util.c:43): token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ
2024-05-28 10:16:47 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:47 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:47 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:16:49 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:16:49 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:16:49 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:16:49 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "ls", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ" }
2024-05-28 10:16:49 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:16:49 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:49 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:49 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:49 [DEBUG] (src/server/file_operations.c:240): 处理ls命令，user_id=2
2024-05-28 10:16:49 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:16:49 [DEBUG] (src/server/file_operations.c:255): 获取到的当前路径：/
2024-05-28 10:16:49 [DEBUG] (src/server/file_operations.c:309): 查询到的行数：3
2024-05-28 10:16:49 [DEBUG] (src/server/file_operations.c:313): 发送的 JSON 响应：[ { "filename": "xiaheng", "type": "d" }, { "filename": "heping", "type": "d" }, { "filename": "suyu", "type": "d" } ]
2024-05-28 10:16:49 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:49 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:16:51 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:16:51 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:16:51 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:16:51 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "cd", "args": "xiaheng", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ" }
2024-05-28 10:16:51 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:16:51 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:51 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:51 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:51 [DEBUG] (src/server/file_operations.c:70): 处理cd命令，user_id=2，path=xiaheng
2024-05-28 10:16:51 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:16:51 [DEBUG] (src/server/file_operations.c:85): 当前目录：/
2024-05-28 10:16:51 [DEBUG] (src/server/file_operations.c:107): 处理其他路径
2024-05-28 10:16:51 [DEBUG] (src/server/file_operations.c:109): 当前路径为根目录
2024-05-28 10:16:51 [DEBUG] (src/server/file_operations.c:117): 新的路径：/xiaheng
2024-05-28 10:16:51 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /xiaheng
2024-05-28 10:16:51 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:51 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:16:54 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:16:54 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:16:54 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:16:54 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "pwd", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ" }
2024-05-28 10:16:54 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:16:54 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:54 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:54 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:54 [DEBUG] (src/server/file_operations.c:34): 处理pwd命令，user_id=2
2024-05-28 10:16:54 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /xiaheng
2024-05-28 10:16:54 [DEBUG] (src/server/file_operations.c:49): 当前目录：/xiaheng
2024-05-28 10:16:54 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:54 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:16:57 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:16:57 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:16:57 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:16:57 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "ls", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ" }
2024-05-28 10:16:57 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:16:57 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:57 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:57 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:57 [DEBUG] (src/server/file_operations.c:240): 处理ls命令，user_id=2
2024-05-28 10:16:57 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /xiaheng
2024-05-28 10:16:57 [DEBUG] (src/server/file_operations.c:255): 获取到的当前路径：/xiaheng
2024-05-28 10:16:57 [DEBUG] (src/server/file_operations.c:309): 查询到的行数：0
2024-05-28 10:16:57 [DEBUG] (src/server/file_operations.c:313): 发送的 JSON 响应：[ ]
2024-05-28 10:16:57 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:57 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:16:59 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:16:59 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:16:59 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:16:59 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "cd", "args": "..", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ" }
2024-05-28 10:16:59 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:16:59 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:59 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:59 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:16:59 [DEBUG] (src/server/file_operations.c:70): 处理cd命令，user_id=2，path=..
2024-05-28 10:16:59 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /xiaheng
2024-05-28 10:16:59 [DEBUG] (src/server/file_operations.c:85): 当前目录：/xiaheng
2024-05-28 10:16:59 [DEBUG] (src/server/file_operations.c:91): 处理..路径
2024-05-28 10:16:59 [DEBUG] (src/server/file_operations.c:117): 新的路径：/
2024-05-28 10:16:59 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /
2024-05-28 10:16:59 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:16:59 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:17:03 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:17:03 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:17:03 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:17:03 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "ls", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ" }
2024-05-28 10:17:03 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:17:03 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:17:03 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:17:03 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:17:03 [DEBUG] (src/server/file_operations.c:240): 处理ls命令，user_id=2
2024-05-28 10:17:03 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:17:03 [DEBUG] (src/server/file_operations.c:255): 获取到的当前路径：/
2024-05-28 10:17:03 [DEBUG] (src/server/file_operations.c:309): 查询到的行数：3
2024-05-28 10:17:03 [DEBUG] (src/server/file_operations.c:313): 发送的 JSON 响应：[ { "filename": "xiaheng", "type": "d" }, { "filename": "heping", "type": "d" }, { "filename": "suyu", "type": "d" } ]
2024-05-28 10:17:03 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:17:03 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:17:14 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:17:14 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:17:14 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:17:14 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "ls", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ" }
2024-05-28 10:17:14 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:17:14 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:17:14 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:17:14 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:17:14 [DEBUG] (src/server/file_operations.c:240): 处理ls命令，user_id=2
2024-05-28 10:17:14 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:17:14 [DEBUG] (src/server/file_operations.c:255): 获取到的当前路径：/
2024-05-28 10:17:14 [DEBUG] (src/server/file_operations.c:309): 查询到的行数：3
2024-05-28 10:17:14 [DEBUG] (src/server/file_operations.c:313): 发送的 JSON 响应：[ { "filename": "xiaheng", "type": "d" }, { "filename": "heping", "type": "d" }, { "filename": "suyu", "type": "d" } ]
2024-05-28 10:17:14 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:17:14 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:17:16 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:17:16 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:17:16 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:17:16 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "rm", "args": "suyu", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjI2MDcsImV4cCI6MTcxNjg2NjIwNywic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.j5h5eoiYEQi7l3q_RuIVyjx5_Al0ZGwaq4T1UIKszJZhAw1v9npu1LxZhy2vt1PeBLDkimW8dMZHOrJ1qOi_fQ" }
2024-05-28 10:17:16 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:17:16 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:17:16 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:17:16 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:17:16 [DEBUG] (src/server/file_operations.c:498): 处理remove命令，user_id=2，filename=suyu
2024-05-28 10:17:16 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:17:16 [ERROR] (src/server/file_operations.c:550): Failed to remove file: /suyu
2024-05-28 10:17:16 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:17:16 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:23:26 [INFO] (src/server/main.c:10): server starting...
2024-05-28 10:23:26 [INFO] (src/server/main.c:25): Configuration loaded: IP=192.168.5.164, Port=8080, MinThreads=2, MaxThreads=10, QueueSize=50
2024-05-28 10:23:26 [INFO] (src/server/server.c:17): Initializing server, IP=192.168.5.164, Port=8080, MinThreads=2, MaxThreads=10, QueueSize=50
2024-05-28 10:23:26 [INFO] (src/server/network_utils.c:13): Attempting to create server socket at 192.168.5.164:8080
2024-05-28 10:23:26 [DEBUG] (src/server/network_utils.c:22): Socket created, FD=4
2024-05-28 10:23:26 [DEBUG] (src/server/network_utils.c:30): Socket options set, SO_REUSEADDR
2024-05-28 10:23:26 [DEBUG] (src/server/network_utils.c:44): Socket bound to 192.168.5.164:8080
2024-05-28 10:23:26 [INFO] (src/server/network_utils.c:52): Server socket listening on 192.168.5.164:8080
2024-05-28 10:23:26 [INFO] (src/server/server.c:25): Server socket created, FD=4
2024-05-28 10:23:26 [INFO] (src/server/thread_pool.c:15): Creating thread pool with MinThreads=2, MaxThreads=10, QueueSize=50
2024-05-28 10:23:26 [DEBUG] (src/server/thread_pool.c:66): Worker thread 0 started.
2024-05-28 10:23:26 [DEBUG] (src/server/thread_pool.c:66): Worker thread 1 started.
2024-05-28 10:23:26 [INFO] (src/server/thread_pool.c:69): Thread pool created successfully.
2024-05-28 10:23:26 [INFO] (src/server/server.c:34): Thread pool created, MinThreads=2, MaxThreads=10, QueueSize=50
2024-05-28 10:23:26 [INFO] (src/server/server.c:45): Monitor thread created.
2024-05-28 10:23:26 [DEBUG] (src/server/epoll_manager.c:15): Attempting to create a new epoll instance.
2024-05-28 10:23:26 [INFO] (src/server/epoll_manager.c:21): Created new epoll instance with FD: 5
2024-05-28 10:23:26 [INFO] (src/server/server.c:55): Epoll instance created, FD=5
2024-05-28 10:23:26 [DEBUG] (src/server/epoll_manager.c:28): Adding FD 4 to epoll instance with FD 5.
2024-05-28 10:23:26 [INFO] (src/server/epoll_manager.c:33): FD 4 added to epoll instance.
2024-05-28 10:23:26 [INFO] (src/server/server.c:87): Monitor thread is monitoring thread pool
2024-05-28 10:23:26 [INFO] (src/server/server.c:61): Server socket added to epoll, FD=4
2024-05-28 10:23:26 [INFO] (src/server/server.c:63): Server is now listening on 192.168.5.164:8080
2024-05-28 10:23:26 [INFO] (src/server/epoll_manager.c:64): Starting epoll event loop.
2024-05-28 10:23:34 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:23:34 [DEBUG] (src/server/epoll_manager.c:28): Adding FD 6 to epoll instance with FD 5.
2024-05-28 10:23:34 [INFO] (src/server/epoll_manager.c:33): FD 6 added to epoll instance.
2024-05-28 10:23:34 [INFO] (src/server/epoll_manager.c:89): Accepted new connection: FD 6
2024-05-28 10:23:39 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:23:39 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:23:39 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:23:39 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "login", "args": { "username": "xiaheng", "password": "9651643461c6ff49fe1482e3de6563f1366f2b910e742d4af0b9628239a7f227" } }
2024-05-28 10:23:39 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:39 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:39 [INFO] (src/server/database.c:98): Retrieved user 'xiaheng' from database
2024-05-28 10:23:39 [INFO] (src/server/auth_handler.c:94): User logged in successfully: xiaheng
2024-05-28 10:23:39 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /
2024-05-28 10:23:39 [DEBUG] (src/server/jwt_util.c:43): token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwMTksImV4cCI6MTcxNjg2NjYxOSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.Jzv1NnrIrYYWdGwZgOgIEhvD7oMixwPm2lNEQrDBoN4fv17_Zomvnml6bHqhd6rjhKoSWSpnSsH3oDR-ckGEVw
2024-05-28 10:23:39 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:39 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:39 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:23:41 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:23:41 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:23:41 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:23:41 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "ls", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwMTksImV4cCI6MTcxNjg2NjYxOSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.Jzv1NnrIrYYWdGwZgOgIEhvD7oMixwPm2lNEQrDBoN4fv17_Zomvnml6bHqhd6rjhKoSWSpnSsH3oDR-ckGEVw" }
2024-05-28 10:23:41 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:23:41 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:41 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:41 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:41 [DEBUG] (src/server/file_operations.c:240): 处理ls命令，user_id=2
2024-05-28 10:23:41 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:23:41 [DEBUG] (src/server/file_operations.c:255): 获取到的当前路径：/
2024-05-28 10:23:41 [DEBUG] (src/server/file_operations.c:309): 查询到的行数：3
2024-05-28 10:23:41 [DEBUG] (src/server/file_operations.c:313): 发送的 JSON 响应：[ { "filename": "xiaheng", "type": "d" }, { "filename": "heping", "type": "d" }, { "filename": "suyu", "type": "d" } ]
2024-05-28 10:23:41 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:41 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:23:44 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:23:44 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:23:44 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:23:44 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "cd", "args": "xiaheng", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwMTksImV4cCI6MTcxNjg2NjYxOSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.Jzv1NnrIrYYWdGwZgOgIEhvD7oMixwPm2lNEQrDBoN4fv17_Zomvnml6bHqhd6rjhKoSWSpnSsH3oDR-ckGEVw" }
2024-05-28 10:23:44 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:23:44 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:44 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:44 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:44 [DEBUG] (src/server/file_operations.c:70): 处理cd命令，user_id=2，path=xiaheng
2024-05-28 10:23:44 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:23:44 [DEBUG] (src/server/file_operations.c:85): 当前目录：/
2024-05-28 10:23:44 [DEBUG] (src/server/file_operations.c:107): 处理其他路径
2024-05-28 10:23:44 [DEBUG] (src/server/file_operations.c:109): 当前路径为根目录
2024-05-28 10:23:44 [DEBUG] (src/server/file_operations.c:117): 新的路径：/xiaheng
2024-05-28 10:23:44 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /xiaheng
2024-05-28 10:23:44 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:44 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:23:47 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:23:47 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:23:47 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:23:47 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "cd", "args": "..", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwMTksImV4cCI6MTcxNjg2NjYxOSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.Jzv1NnrIrYYWdGwZgOgIEhvD7oMixwPm2lNEQrDBoN4fv17_Zomvnml6bHqhd6rjhKoSWSpnSsH3oDR-ckGEVw" }
2024-05-28 10:23:47 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:23:47 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:47 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:47 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:47 [DEBUG] (src/server/file_operations.c:70): 处理cd命令，user_id=2，path=..
2024-05-28 10:23:47 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /xiaheng
2024-05-28 10:23:47 [DEBUG] (src/server/file_operations.c:85): 当前目录：/xiaheng
2024-05-28 10:23:47 [DEBUG] (src/server/file_operations.c:91): 处理..路径
2024-05-28 10:23:47 [DEBUG] (src/server/file_operations.c:117): 新的路径：/
2024-05-28 10:23:47 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /
2024-05-28 10:23:47 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:47 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:23:54 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:23:54 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:23:54 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:23:54 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "rm", "args": "suyu", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwMTksImV4cCI6MTcxNjg2NjYxOSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.Jzv1NnrIrYYWdGwZgOgIEhvD7oMixwPm2lNEQrDBoN4fv17_Zomvnml6bHqhd6rjhKoSWSpnSsH3oDR-ckGEVw" }
2024-05-28 10:23:54 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:23:54 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:54 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:54 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:54 [DEBUG] (src/server/file_operations.c:498): 处理remove命令，user_id=2，filename=suyu
2024-05-28 10:23:54 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:23:54 [INFO] (src/server/database.c:225): Deleted file record with id=3 from virtual_file_table
2024-05-28 10:23:54 [INFO] (src/server/file_operations.c:579): File removed successfully: /suyu
2024-05-28 10:23:54 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:54 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:23:56 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:23:56 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:23:56 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:23:56 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "ls", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwMTksImV4cCI6MTcxNjg2NjYxOSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.Jzv1NnrIrYYWdGwZgOgIEhvD7oMixwPm2lNEQrDBoN4fv17_Zomvnml6bHqhd6rjhKoSWSpnSsH3oDR-ckGEVw" }
2024-05-28 10:23:56 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:23:56 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:56 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:56 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:23:56 [DEBUG] (src/server/file_operations.c:240): 处理ls命令，user_id=2
2024-05-28 10:23:56 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:23:56 [DEBUG] (src/server/file_operations.c:255): 获取到的当前路径：/
2024-05-28 10:23:56 [DEBUG] (src/server/file_operations.c:309): 查询到的行数：2
2024-05-28 10:23:56 [DEBUG] (src/server/file_operations.c:313): 发送的 JSON 响应：[ { "filename": "xiaheng", "type": "d" }, { "filename": "heping", "type": "d" } ]
2024-05-28 10:23:56 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:23:56 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:24:07 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:24:07 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:24:07 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:24:07 [ERROR] (src/server/command_handler.c:28): Client disconnected, FD=6
2024-05-28 10:24:07 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:24:11 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:24:11 [DEBUG] (src/server/epoll_manager.c:28): Adding FD 6 to epoll instance with FD 5.
2024-05-28 10:24:11 [INFO] (src/server/epoll_manager.c:33): FD 6 added to epoll instance.
2024-05-28 10:24:11 [INFO] (src/server/epoll_manager.c:89): Accepted new connection: FD 6
2024-05-28 10:24:28 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:24:28 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:24:28 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:24:28 [ERROR] (src/server/command_handler.c:28): Client disconnected, FD=6
2024-05-28 10:24:28 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:24:32 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:24:32 [DEBUG] (src/server/epoll_manager.c:28): Adding FD 6 to epoll instance with FD 5.
2024-05-28 10:24:32 [INFO] (src/server/epoll_manager.c:33): FD 6 added to epoll instance.
2024-05-28 10:24:32 [INFO] (src/server/epoll_manager.c:89): Accepted new connection: FD 6
2024-05-28 10:24:49 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:24:49 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:24:49 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:24:49 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "register", "args": { "username": "liuziwei", "password": "9651643461c6ff49fe1482e3de6563f1366f2b910e742d4af0b9628239a7f227" } }
2024-05-28 10:24:49 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:24:49 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:24:49 [INFO] (src/server/database.c:51): Checked username 'liuziwei': 0
2024-05-28 10:24:49 [INFO] (src/server/database.c:66): Stored user 'liuziwei' in database
2024-05-28 10:24:49 [INFO] (src/server/auth_handler.c:64): User registered successfully: liuziwei
2024-05-28 10:24:49 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:24:49 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:24:49 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:24:59 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:24:59 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:24:59 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:24:59 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "login", "args": { "username": "xiaheng", "password": "9651643461c6ff49fe1482e3de6563f1366f2b910e742d4af0b9628239a7f227" } }
2024-05-28 10:24:59 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:24:59 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:24:59 [INFO] (src/server/database.c:98): Retrieved user 'xiaheng' from database
2024-05-28 10:24:59 [INFO] (src/server/auth_handler.c:94): User logged in successfully: xiaheng
2024-05-28 10:24:59 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /
2024-05-28 10:24:59 [DEBUG] (src/server/jwt_util.c:43): token: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwOTksImV4cCI6MTcxNjg2NjY5OSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.p6gdQqqIZxl4Ze1qzCNcVfWrAzGQaKdjHJvCLsEVzPh1TxVWYc2FPsi2YKk8FBDDGIOvfmCq4ofWvFyP7i1fuw
2024-05-28 10:24:59 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:24:59 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:24:59 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:25:05 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:25:05 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:25:05 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:25:05 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "ls", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwOTksImV4cCI6MTcxNjg2NjY5OSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.p6gdQqqIZxl4Ze1qzCNcVfWrAzGQaKdjHJvCLsEVzPh1TxVWYc2FPsi2YKk8FBDDGIOvfmCq4ofWvFyP7i1fuw" }
2024-05-28 10:25:05 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:25:05 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:05 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:05 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:05 [DEBUG] (src/server/file_operations.c:240): 处理ls命令，user_id=2
2024-05-28 10:25:05 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:25:05 [DEBUG] (src/server/file_operations.c:255): 获取到的当前路径：/
2024-05-28 10:25:05 [DEBUG] (src/server/file_operations.c:309): 查询到的行数：2
2024-05-28 10:25:05 [DEBUG] (src/server/file_operations.c:313): 发送的 JSON 响应：[ { "filename": "xiaheng", "type": "d" }, { "filename": "heping", "type": "d" } ]
2024-05-28 10:25:05 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:05 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:25:10 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:25:10 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:25:10 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:25:10 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "cd", "args": "xiaheng", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwOTksImV4cCI6MTcxNjg2NjY5OSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.p6gdQqqIZxl4Ze1qzCNcVfWrAzGQaKdjHJvCLsEVzPh1TxVWYc2FPsi2YKk8FBDDGIOvfmCq4ofWvFyP7i1fuw" }
2024-05-28 10:25:10 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:25:10 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:10 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:10 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:10 [DEBUG] (src/server/file_operations.c:70): 处理cd命令，user_id=2，path=xiaheng
2024-05-28 10:25:10 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:25:10 [DEBUG] (src/server/file_operations.c:85): 当前目录：/
2024-05-28 10:25:10 [DEBUG] (src/server/file_operations.c:107): 处理其他路径
2024-05-28 10:25:10 [DEBUG] (src/server/file_operations.c:109): 当前路径为根目录
2024-05-28 10:25:10 [DEBUG] (src/server/file_operations.c:117): 新的路径：/xiaheng
2024-05-28 10:25:10 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /xiaheng
2024-05-28 10:25:10 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:10 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:25:13 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:25:13 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:25:13 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:25:13 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "pwd", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwOTksImV4cCI6MTcxNjg2NjY5OSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.p6gdQqqIZxl4Ze1qzCNcVfWrAzGQaKdjHJvCLsEVzPh1TxVWYc2FPsi2YKk8FBDDGIOvfmCq4ofWvFyP7i1fuw" }
2024-05-28 10:25:13 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:25:13 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:13 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:13 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:13 [DEBUG] (src/server/file_operations.c:34): 处理pwd命令，user_id=2
2024-05-28 10:25:13 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /xiaheng
2024-05-28 10:25:13 [DEBUG] (src/server/file_operations.c:49): 当前目录：/xiaheng
2024-05-28 10:25:13 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:13 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:25:15 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:25:15 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:25:15 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:25:15 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "cd", "args": "..", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwOTksImV4cCI6MTcxNjg2NjY5OSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.p6gdQqqIZxl4Ze1qzCNcVfWrAzGQaKdjHJvCLsEVzPh1TxVWYc2FPsi2YKk8FBDDGIOvfmCq4ofWvFyP7i1fuw" }
2024-05-28 10:25:15 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:25:15 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:15 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:15 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:15 [DEBUG] (src/server/file_operations.c:70): 处理cd命令，user_id=2，path=..
2024-05-28 10:25:15 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /xiaheng
2024-05-28 10:25:15 [DEBUG] (src/server/file_operations.c:85): 当前目录：/xiaheng
2024-05-28 10:25:15 [DEBUG] (src/server/file_operations.c:91): 处理..路径
2024-05-28 10:25:15 [DEBUG] (src/server/file_operations.c:117): 新的路径：/
2024-05-28 10:25:15 [INFO] (src/server/database.c:177): Updated current path for user_id=2 to /
2024-05-28 10:25:15 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:15 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:25:17 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:25:17 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:25:17 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:25:17 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "pwd", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwOTksImV4cCI6MTcxNjg2NjY5OSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.p6gdQqqIZxl4Ze1qzCNcVfWrAzGQaKdjHJvCLsEVzPh1TxVWYc2FPsi2YKk8FBDDGIOvfmCq4ofWvFyP7i1fuw" }
2024-05-28 10:25:17 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:25:17 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:17 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:17 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:17 [DEBUG] (src/server/file_operations.c:34): 处理pwd命令，user_id=2
2024-05-28 10:25:17 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:25:17 [DEBUG] (src/server/file_operations.c:49): 当前目录：/
2024-05-28 10:25:17 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:17 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:25:22 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:25:22 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:25:22 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:25:22 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "rm", "args": "heping", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwOTksImV4cCI6MTcxNjg2NjY5OSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.p6gdQqqIZxl4Ze1qzCNcVfWrAzGQaKdjHJvCLsEVzPh1TxVWYc2FPsi2YKk8FBDDGIOvfmCq4ofWvFyP7i1fuw" }
2024-05-28 10:25:22 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:25:22 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:22 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:22 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:22 [DEBUG] (src/server/file_operations.c:498): 处理remove命令，user_id=2，filename=heping
2024-05-28 10:25:22 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:25:22 [INFO] (src/server/database.c:225): Deleted file record with id=2 from virtual_file_table
2024-05-28 10:25:22 [INFO] (src/server/file_operations.c:579): File removed successfully: /heping
2024-05-28 10:25:22 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:22 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:25:24 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:25:24 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:25:24 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:25:24 [INFO] (src/server/command_handler.c:38): Processing command from FD=6: { "command": "ls", "token": "eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE3MTY4NjMwOTksImV4cCI6MTcxNjg2NjY5OSwic3ViIjoieGlhaGVuZyIsImlzcyI6Imlzc3VlciIsImF1ZCI6ImF1ZGllbmNlIn0.p6gdQqqIZxl4Ze1qzCNcVfWrAzGQaKdjHJvCLsEVzPh1TxVWYc2FPsi2YKk8FBDDGIOvfmCq4ofWvFyP7i1fuw" }
2024-05-28 10:25:24 [DEBUG] (src/server/jwt_util.c:152): 从 Token 中提取的用户名: xiaheng
2024-05-28 10:25:24 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:24 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:24 [INFO] (src/server/database.c:21): Connected to database successfully
2024-05-28 10:25:24 [DEBUG] (src/server/file_operations.c:240): 处理ls命令，user_id=2
2024-05-28 10:25:24 [INFO] (src/server/database.c:164): Retrieved current path for user_id=2: /
2024-05-28 10:25:24 [DEBUG] (src/server/file_operations.c:255): 获取到的当前路径：/
2024-05-28 10:25:24 [DEBUG] (src/server/file_operations.c:309): 查询到的行数：1
2024-05-28 10:25:24 [DEBUG] (src/server/file_operations.c:313): 发送的 JSON 响应：[ { "filename": "xiaheng", "type": "d" } ]
2024-05-28 10:25:24 [INFO] (src/server/database.c:28): Disconnected from database
2024-05-28 10:25:24 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
2024-05-28 10:25:34 [DEBUG] (src/server/epoll_manager.c:73): Processing 1 events.
2024-05-28 10:25:34 [DEBUG] (src/server/epoll_manager.c:93): Adding task for FD 6 to thread pool.
2024-05-28 10:25:34 [DEBUG] (src/server/thread_pool.c:115): Task added to thread pool queue.
2024-05-28 10:25:34 [ERROR] (src/server/command_handler.c:28): Client disconnected, FD=6
2024-05-28 10:25:34 [DEBUG] (src/server/thread_pool.c:262): Executed a task in the thread pool.
